"use strict";var marsonians={};marsonians.gameBackground=function(){var a,n,e,o,s=this.gameBackground,i=-(40*globDevicePixelRatio),t=0;s.setBack=function(){marsoniansGame.stage.backgroundColor="#ff7b1f",a=marsoniansGame.add.image(i,i+(globHeight-(1e3+2*i)),"bg-background"),n=marsoniansGame.add.image(i+360,globHeight-160,"bg-moon"),e=marsoniansGame.add.image(i,i+(globHeight-(1e3+2*i)),"bg-landscape"),n.anchor.setTo(.5,.5),n.angle=t},s.setAstronaugthy=function(){o=marsoniansGame.add.image(marsoniansGame.world.centerX/4,marsoniansGame.world.centerY,"astronaughty"),o.scale.setTo(.2,.2),o.anchor.setTo(.5,.5)},s.updateBack=function(){t+=.005,n.angle=t},s.updateAstronaughty=function(){o.angle+=.05,o.x+=.1}},marsonians.shakeWorld=function(){var a=this.shakeWorld,n=20,e=0,o=40;a.shake=function(a){e=a},a.update=function(){if(e>0){var a=e/o*n,s=marsoniansGame.rnd.integerInRange(-a,a),i=marsoniansGame.rnd.integerInRange(-a,a);marsoniansGame.world.setBounds(s,i,marsoniansGame.width+s,marsoniansGame.height+i),e--,0===e&&marsoniansGame.world.setBounds(0,0,marsoniansGame.width,marsoniansGame.height)}}},marsonians.difficulty=function(){var a=this.difficulty;a.increment=function(){globShootSpeed>1?globShootSpeed+=.01:globShootSpeed>1.5?globShootSpeed+=.005:globShootSpeed+=.05}},marsonians.pause=function(){var a=this.pause;a.init=function(){}},marsonians.score=function(){var a,n=this.score,e=0,o=function(n,o){a=marsoniansGame.add.text(o.x,o.y,"",{font:"bangers",fontSize:80,fontStyle:"normal",fill:"#fff",align:"center",letterSpacing:200}),a.setShadow(0,5,"#fe9045",0),a.anchor.setTo(.5,0),a.padding.set(10,0),a.scale.setTo(.5,.5),n&&a.setText(e)},s=function(){var a=localStorage.getItem("marsonians-high-score"),n="Your Highscore";(e>a||!a)&&(a=e,localStorage.setItem("marsonians-high-score",a),marsonians.audio.highscore(),n="NEW Highscore");var o=marsoniansGame.add.text(marsoniansGame.world.centerX,320,n,{font:"bangers",fontSize:30,fontStyle:"normal",fill:"#fff",align:"center",letterSpacing:200});o.anchor.setTo(.5,0),o.padding.set(10,0),o.scale.setTo(.5,.5);var s=marsoniansGame.add.text(marsoniansGame.world.centerX,350,a,{font:"bangers",fontSize:80,fontStyle:"normal",fill:"#fff",align:"center",letterSpacing:200});s.setShadow(0,5,"#fe9045",0),s.anchor.setTo(.5,0),s.padding.set(10,0),s.scale.setTo(.5,.5)};n.add=function(){e+=100,a.setText(e)},n.printFinal=function(){var a=marsoniansGame.add.text(marsoniansGame.world.centerX,220,"Your Score",{font:"bangers",fontSize:30,fontStyle:"normal",fill:"#fff",align:"center",letterSpacing:200});a.anchor.setTo(.5,0),a.padding.set(10,0),a.scale.setTo(.5,.5);var n={x:marsoniansGame.world.centerX,y:250};o(!0,n),s()},n.init=function(){e=0;var a={x:marsoniansGame.world.centerX,y:35};o(!1,a)}},marsonians.audio=function(){var a=this.audio,n=!1;a.laser=function(){if(!n){n=!0;var a=marsoniansGame.add.audio("laserSound");a.play(),a.volume=1,setTimeout(function(){n=!1},200)}},a.extraLife=function(){var a=marsoniansGame.add.audio("extraLife");a.play(),a.volume=.5},a.button=function(){var a=marsoniansGame.add.audio("blop");a.play(),a.volume=.3},a.highscore=function(){var a=marsoniansGame.add.audio("win");a.play(),a.volume=1},a.hit=function(){var a=marsoniansGame.add.audio("hit");a.play(),a.volume=1},a.explosion=function(){var a=marsoniansGame.add.audio("explosionSound");a.play(),a.volume=.2}},marsonians.life=function(){var a,n,e=this.life,o=function(){var a,n,e,o=Math.random();a=marsoniansGame.add.sprite(marsoniansGame.world.randomX,marsoniansGame.world.randomY,"life"),marsoniansGame.physics.arcade.enable(a),a.body.collideWorldBounds=!0,a.body.bounce.setTo(.8,.8),a.body.velocity.setTo(20+100*o,30+100*o),a.hitArea=new Phaser.Rectangle(0,0,76,122),o>.5?(n=.7,e=.7):(n=.5,e=.5),a.scale.setTo(.4*n,.4*e),a.inputEnabled=!0,a.events.onInputDown.add(t,this)},s=function(n){var e=a.create(20*n,20,"life");e.scale.setTo(.4,.4)},i=function(a){var n=marsoniansGame.add.sprite(a.position.x,a.position.y,"life-explosion");n.anchor.setTo(.5,.5),n.scale.setTo(a.scale.x,a.scale.y);var e=n.animations.add("explosionAni",Phaser.Animation.generateFrameNames("explosion_",0,29,"",5));e.loop=!1,n.animations.currentAnim.onComplete.add(function(a){a.destroy()},this),e.play(35)},t=function(a){marsonians.audio.extraLife(),i(a),globLifeCount+=1,s(globLifeCount),a.destroy(),marsonians.difficulty.increment(),n=setTimeout(function(){window.requestAnimationFrame(o)},3e3)};e.set=function(){a=marsoniansGame.add.group();for(var n=0;n<globLifeCount;n++)s(n+1)},e.remove=function(){if(globLifeCount>0){marsonians.audio.hit(),marsonians.shakeWorld.shake(40),globLifeCount-=1;var n=a.getTop();n.destroy()}else marsoniansGame.state.start("dead",!0,!1)},e.startLifeSystem=function(){n=setTimeout(function(){o()},3e3)}},marsonians.alien=function(){var a=this.alien,n=function(a,n){var e;e=n?globAliensFront.create(a.position.x,a.position.y,"alien1-explosion"):globAliensBack.create(a.position.x,a.position.y,"alien1-explosion"),e.scale.setTo(a.scale.x,a.scale.y),e.body.velocity.setTo(10,10);var o=e.animations.add("explosionAni",Phaser.Animation.generateFrameNames("explosion_",0,10,"",5));o.loop=!1,e.animations.currentAnim.onComplete.add(function(a){a.destroy()},this),o.play(60)},e=function(a,e){marsonians.audio.explosion(),n(a,e),a.destroy(),marsonians.score.add(),marsonians.difficulty.increment(),o()},o=function(){var a,n,o,s,i=Math.random();i>.5?(n=!0,a=globAliensFront.create(marsoniansGame.world.randomX,marsoniansGame.world.randomY,"alien1"),o=.6,s=.6):(n=!1,a=globAliensBack.create(marsoniansGame.world.randomX,marsoniansGame.world.randomY,"alien1"),o=.3,s=.3),a.name="alien"+a,a.body.collideWorldBounds=!0,a.body.bounce.setTo(.8,.8),a.body.velocity.setTo(20+100*i,30+100*i);var t=new Phaser.Rectangle(0,0,300,300);a.hitArea=t,a.scale.setTo(o,s),a.inputEnabled=!0,a.events.onInputDown.add(e,this,n);var r=a.animations.add("shootAni",Phaser.Animation.generateFrameNames("alien_",0,89,"",5));r.loop=!0,r.onLoop.add(function(){marsonians.life.remove()}),r.play(globShootSpeed+15)};a.create=function(){globAliensBack=marsoniansGame.add.group(),globAliensFront=marsoniansGame.add.group(),globAliensBack.enableBody=!0,globAliensFront.enableBody=!0;for(var a=0;a<globAlienCount;a++)o();var n=1e4,e=function a(){setTimeout(function(){o(),n+=5e3,a()},n)};e()}},marsonians.deadState=function(){},marsonians.deadState.prototype={create:function(){var a=function(a,n,e,o){var s=Math.min(e/a,o/n);return{width:a*s,height:n*s}},n=marsoniansGame.add.sprite(marsoniansGame.world.centerX-100,20,"game-over"),e=n.animations.add("gameOverAni1",Phaser.Animation.generateFrameNames("game-over_",0,79,"",5));e.loop=!1,e.play(20);var o=function(){marsonians.audio.button(),globLifeCount=3,globAlienCount=3,globShootSpeed=3,globAliensFront=void 0,globAliensBack=void 0,marsoniansGame.state.start("game",!0,!1)},s=marsoniansGame.add.button(marsoniansGame.world.centerX,2*marsoniansGame.world.centerY-80,"restartButton",o,void 0,2,1,0),i=globWidth/2,t=184;globWidth>500&&(i=250);var r=a(600,184,i,t);s.anchor.setTo(.5,.5),s.width=r.width,s.height=r.height,s.inputEnabled=!0,s.input.useHandCursor=!0,marsonians.score.printFinal()}},marsonians.gameState=function(){},marsonians.gameState.prototype={create:function(){marsoniansGame.physics.startSystem(Phaser.Physics.ARCADE),marsoniansGame.world.setBounds(0,0,globWidth,globHeight),marsoniansGame.physics.startSystem(Phaser.Physics.ARCADE),marsoniansGame.physics.arcade.gravity.x=0,marsoniansGame.physics.arcade.gravity.y=10,marsonians.gameBackground.setBack(),marsonians.life.set(),marsonians.life.startLifeSystem(),marsonians.alien.create(),marsonians.score.init(),marsonians.pause.init()},update:function(){marsonians.gameBackground.updateBack(),marsonians.shakeWorld.update(),marsoniansGame.input.mousePointer.isDown&&(marsonians.shakeWorld.shake(3),marsonians.audio.laser())}},marsonians.menuState=function(){},marsonians.menuState.prototype={preload:function(){var a=marsoniansGame.add.sprite(marsoniansGame.world.centerX-100,marsoniansGame.world.centerY-100,"loading"),n=a.animations.add("loadingAni1",Phaser.Animation.generateFrameNames("loading_",0,80,"",5));n.loop=!0,n.play(40),marsoniansGame.load.image("startButton","/assets/img/start-btn.png",500,190),marsoniansGame.load.image("restartButton","/assets/img/restart-btn.png",720,184),marsoniansGame.load.image("logo","/assets/img/logo.png",1082,163),marsoniansGame.load.image("astronaughty","/assets/img/astronaughty.png",600,961),marsoniansGame.load.image("bg-background","/assets/img/background/background-alt.jpg",2e3,1e3),marsoniansGame.load.image("bg-landscape","/assets/img/background/landscape.png",2e3,1e3),marsoniansGame.load.image("bg-moon","/assets/img/background/moon.png",809,804),marsoniansGame.load.atlasJSONHash("alien1","/assets/img/alien-1/alien-1.png","/assets/img/alien-1/alien-1.json"),marsoniansGame.load.atlasJSONHash("alien1-explosion","/assets/img/alien-1-expl/alien-1-expl.png","/assets/img/alien-1-expl/alien-1-expl.json"),marsoniansGame.load.atlasJSONHash("life-explosion","/assets/img/life-expl/life-expl.png","/assets/img/life-expl/life-expl.json"),marsoniansGame.load.atlasJSONHash("game-over","/assets/img/game-over/game-over.png","/assets/img/game-over/game-over.json"),marsoniansGame.load.spritesheet("life","/assets/img/life.png",76,122),marsoniansGame.load.audio("laserSound","/assets/audio/laser.mp3"),marsoniansGame.load.audio("explosionSound","/assets/audio/explosion.mp3"),marsoniansGame.load.audio("extraLife","/assets/audio/life.mp3"),marsoniansGame.load.audio("hit","/assets/audio/pain.mp3"),marsoniansGame.load.audio("blop","/assets/audio/blop.mp3"),marsoniansGame.load.audio("win","/assets/audio/win.mp3")},create:function(){var a=function(a,n,e,o){var s=Math.min(e/a,o/n);return{width:a*s,height:n*s}};marsonians.gameBackground.setBack(),marsonians.gameBackground.setAstronaugthy();var n=marsoniansGame.add.image(marsoniansGame.world.centerX,marsoniansGame.world.centerY/1.5,"logo"),e=globWidth/1.1,o=184;globWidth>500&&(e=globWidth/1.5);var s=a(1082,163,e,o);n.anchor.setTo(.5,.5),n.width=s.width,n.height=s.height;var i=function(){marsonians.audio.button(),marsoniansGame.state.start("game",!0,!1),gameCanvas.classList.add("game--active")},t=marsoniansGame.add.button(marsoniansGame.world.centerX,1.2*marsoniansGame.world.centerY,"startButton",i,void 0,2,1,0),r=globWidth/2,m=184;globWidth>500&&(r=250);var d=a(600,184,r,m);t.anchor.setTo(.5,.5),t.width=d.width,t.height=d.height,t.inputEnabled=!0,t.input.useHandCursor=!0},update:function(){marsonians.gameBackground.updateBack(),marsonians.gameBackground.updateAstronaughty()}},marsonians.preloadState=function(){},marsonians.preloadState.prototype={preload:function(){var a=marsoniansGame.add.image(marsoniansGame.world.centerX,marsoniansGame.world.centerY,"anata");a.scale.setTo(.2,.2),a.anchor.setTo(.5,.5),a.alpha=.3,marsoniansGame.load.atlasJSONHash("loading","/assets/img/loading/loading.png","/assets/img/loading/loading.json")},create:function(){marsoniansGame.state.start("menu",!0,!1)}},marsonians.bootState=function(){},marsonians.bootState.prototype={preload:function(){marsoniansGame.stage.backgroundColor="#fb944c",marsoniansGame.load.image("anata","/assets/img/anata.png",343,503)},create:function(){marsoniansGame.device.desktop?(marsoniansGame.scale.maxWidth=1334,marsoniansGame.scale.maxHeight=750):marsoniansGame.scale.forceLandscape=!0,marsoniansGame.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,marsoniansGame.scale.pageAlignHorizontally=!0,marsoniansGame.state.start("preload")}},marsonians.game=function(){window.gameCanvas=document.getElementById("game"),window.globDevicePixelRatio=window.devicePixelRatio,window.globDevicePixelRatio=1,window.globWidth=window.innerWidth*globDevicePixelRatio,window.globHeight=window.innerHeight*globDevicePixelRatio,window.globLifeCount=3,window.globAlienCount=3,window.globShootSpeed=3,window.globAliensFront=void 0,window.globAliensBack=void 0,window.marsoniansGame=new Phaser.Game(globWidth,globHeight,Phaser.AUTO,"game"),marsonians.score(),marsonians.pause(),marsonians.alien(),marsonians.difficulty(),marsonians.life(),marsonians.audio(),marsonians.shakeWorld(),marsonians.gameBackground(),marsoniansGame.state.add("boot",marsonians.bootState),marsoniansGame.state.add("preload",marsonians.preloadState),marsoniansGame.state.add("menu",marsonians.menuState),marsoniansGame.state.add("game",marsonians.gameState),marsoniansGame.state.add("dead",marsonians.deadState),marsoniansGame.state.start("boot"),"serviceWorker"in navigator&&navigator.serviceWorker.register("worker.min.js").then(function(){})},marsonians.game();